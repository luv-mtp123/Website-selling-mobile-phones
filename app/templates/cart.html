{% extends 'base.html' %}

{% block content %}
<h2 class="mb-4 text-primary fw-bold"><i class="fas fa-shopping-cart"></i> Giỏ hàng của bạn</h2>

{% if cart|length > 0 %}
<div class="row">
    <div class="col-md-8">
        <div class="card shadow-sm border-0 rounded-3">
            <div class="card-body">
                <div class="table-responsive">
                    <table class="table align-middle">
                        <thead class="table-light">
                            <tr>
                                <th style="width: 40%">Sản phẩm</th>
                                <th>Đơn giá</th>
                                <th style="width: 15%">Số lượng</th>
                                <th>Thành tiền</th>
                                <th></th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for id, item in cart.items() %}
                            <tr>
                                <td>
                                    <div class="d-flex align-items-center">
                                        <img src="{{ item.image }}" alt="" style="width: 50px; height: 50px; object-fit: cover; border-radius: 5px;" class="me-3">
                                        <div class="fw-bold">{{ item.name }}</div>
                                    </div>
                                </td>
                                <td>{{ item.price | vnd }}</td>
                                <td>
                                    <div class="input-group input-group-sm">
                                        <a href="/cart/update/{{ id }}/decrease" class="btn btn-outline-secondary">-</a>
                                        <input type="text" class="form-control text-center" value="{{ item.quantity }}" readonly style="max-width: 40px;">
                                        <a href="/cart/update/{{ id }}/increase" class="btn btn-outline-secondary">+</a>
                                    </div>
                                </td>
                                <td class="text-danger fw-bold">{{ (item.price * item.quantity) | vnd }}</td>
                                <td>
                                    <a href="/cart/update/{{ id }}/delete" class="text-danger" onclick="return confirm('Xóa sản phẩm này?')"><i class="fas fa-trash-alt"></i></a>
                                </td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
    
    <div class="col-md-4">
        <div class="card shadow-sm border-0 rounded-3 bg-white">
            <div class="card-body">
                <h5 class="card-title fw-bold mb-4">Tổng cộng đơn hàng</h5>
                <div class="d-flex justify-content-between mb-3">
                    <span class="text-muted">Tạm tính:</span>
                    <span class="fw-bold">{{ total_amount | vnd }}</span>
                </div>
                <div class="d-flex justify-content-between mb-3">
                    <span class="text-muted">Giảm giá:</span>
                    <span class="text-success">-0 đ</span>
                </div>
                <hr>
                <div class="d-flex justify-content-between mb-4">
                    <span class="fs-5 fw-bold">Tổng tiền:</span>
                    <span class="fs-4 text-danger fw-bold">{{ total_amount | vnd }}</span>
                </div>
                
                <a href="/checkout" class="btn btn-primary w-100 py-2 rounded-pill fw-bold text-uppercase">Tiến hành thanh toán</a>
                <a href="/" class="btn btn-outline-secondary w-100 mt-2 rounded-pill">Tiếp tục mua sắm</a>
            </div>
        </div>
    </div>
</div>
{% else %}
<div class="text-center py-5 bg-white rounded shadow-sm">
    <img src="https://cdni.iconscout.com/illustration/premium/thumb/empty-cart-2130356-1800917.png" alt="Empty Cart" style="width: 200px;">
    <h4 class="mt-3 text-muted">Giỏ hàng của bạn đang trống</h4>
    <a href="/" class="btn btn-primary mt-3 rounded-pill px-4">Mua sắm ngay</a>
</div>
{% endif %}
{% endblock %}