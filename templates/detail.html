{% extends 'base.html' %}

{% block content %}
<nav aria-label="breadcrumb">
    <ol class="breadcrumb">
        <li class="breadcrumb-item"><a href="/">Trang chủ</a></li>
        <li class="breadcrumb-item active" aria-current="page">{{ product.name }}</li>
    </ol>
</nav>

<div class="row">
    <div class="col-md-5">
        <img src="{{ product.image_url }}" class="img-fluid rounded shadow" alt="{{ product.name }}" onerror="this.src='https://via.placeholder.com/500x500?text=No+Image'">
    </div>
    <div class="col-md-7">
        <h1 class="display-5 fw-bold">{{ product.name }}</h1>
        <h3 class="text-danger mt-3">{{ "{:,.0f}".format(product.price) }} đ</h3>
        <p class="badge bg-secondary">{{ product.brand }}</p>
        
        <div class="mt-4">
            <h5>Mô tả sản phẩm:</h5>
            <p>{{ product.description }}</p>
        </div>

        <button class="btn btn-success btn-lg mt-3 w-100"><i class="fas fa-shopping-cart"></i> Thêm vào giỏ hàng</button>

        <!-- GEMINI AI SUGGESTION -->
        <div class="ai-box mt-4">
            <h5 class="text-primary"><i class="fas fa-robot"></i> Gợi ý từ Gemini AI</h5>
            <p class="text-muted small">Dựa trên sản phẩm bạn đang xem, AI gợi ý các phụ kiện sau:</p>
            <div class="bg-white p-3 rounded border">
                {% if "Vui lòng cấu hình" in ai_suggestion %}
                    <div class="alert alert-warning">{{ ai_suggestion }}</div>
                {% else %}
                    <!-- Sử dụng safe filter để hiển thị HTML từ AI -->
                    {{ ai_suggestion | markdown | safe }}
                {% endif %}
            </div>
        </div>
    </div>
</div>
{% endblock %}